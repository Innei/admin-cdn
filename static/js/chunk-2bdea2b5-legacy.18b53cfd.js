(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bdea2b5"],{"666b":function(t,e,i){"use strict";var a=i("e8c8"),s=i.n(a);s.a},d7b7:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("PageLayout",{attrs:{options:t.options},scopedSlots:t._u([{key:"header",fn:function(){return[i("Button",{attrs:{icon:["far","save"],backcolor:"#2ecc71",name:"保存"},nativeOn:{click:function(e){return t.handleSave(e)}}}),i("Button",{attrs:{icon:["fab","telegram-plane"],name:t.$route.query.id?"更新":"发布"},nativeOn:{click:function(e){return t.handleSubmit(e)}}})]},proxy:!0},{key:"footer",fn:function(){return[i("button",{on:{click:function(){return t.drawerOpen=!t.drawerOpen}}},[i("icon",{attrs:{icon:["fas","sliders-h"]}})],1),i("button",{on:{click:t.toggleFullscreen}},[i("icon",{attrs:{icon:["fas","arrows-alt"]}})],1)]},proxy:!0}])},[i("Writer",{attrs:{name:t.inputLabel,title:t.model.title,text:t.model.text,fullscreen:t.fullscreen},on:{change:t.onChange}},[i("div",{staticClass:"url"},[i("label",{staticClass:"prefix"},[t._v(t._s(t.baseUrl+"/"+t.category.slug+"/"))]),i("UInput",{attrs:{value:t.slug},on:{change:function(e){return t.slug=e}}})],1)]),i("el-drawer",{staticClass:"drawer",attrs:{title:"文章设定",direction:"rtl",visible:t.drawerOpen},on:{"update:visible":function(e){t.drawerOpen=e}}},[i("el-form",{attrs:{model:t.model,"label-width":"80px","label-position":"top"}},[i("el-form-item",{attrs:{label:"分类"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}},t._l(t.categoryRecord,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t._id}})})),1)],1),i("el-form-item",{attrs:{label:"概要"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入概要(Option)"},model:{value:t.summary,callback:function(e){t.summary=e},expression:"summary"}})],1)],1),i("el-form",[i("el-form-item",{attrs:{label:"隐藏?"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.hide,callback:function(e){t.hide=e},expression:"hide"}})],1)],1)],1)],1)},s=[],r=(i("ddb0"),i("9ab4")),o=i("2fe1"),n=i("71ac"),l=i("45eb"),c=i("13cf"),u=i("8eab"),d=i("4bb5"),h=i("e464"),m=i("60a3"),p=i("5a00");let g=class extends(Object(m["b"])(h["a"],p["a"])){constructor(){super(...arguments),this.options={title:""},this.inputLabel="想想取个什么题目比较好呢~",this.model={title:"",text:""},this.drawerOpen=!1,this.categoryId="",this.categoryRecord={},this.timer=null,this.slug="",this.summary="",this.hide=!1,this.prefix="mx-space-post"}async handleSubmit(){const t={...this.model,slug:this.slug,categoryId:this.category._id,summary:""===this.summary?void 0:this.summary,hide:this.hide};this.id?await this.$api("Post").update(this.id,t):await this.$api("Post").post(t),this.$notice.success("发布成功"),this.$router.push("/posts")}onChange(t){this.model={...t}}get baseUrl(){return"https://innei.ren"}get category(){const t=this.categories.get(this.categoryId)||{slug:"",name:""};return{_id:this.categoryId,slug:t.slug,name:t.name}}setDefaultCategory(){if(this.categoryId)return!0;const t=this.categories.first();return!!t&&(this.categoryId=t._id,this.categoryRecord=this.categories.toObject(),!0)}mounted(){this.categoryId||(this.timer=setInterval(()=>{const t=this.setDefaultCategory();t&&(clearInterval(this.timer),this.timer=null)},100))}beforeDestroy(){clearInterval(this.timer),this.timer=null}get id(){return this.$route.query.id}async created(){if(this.options.title=this.id?"修改文章":"撰写新文章",this.id){var t;const{data:e}=await this.$api("Post").get(this.$route.query.id);this.slug=e.slug,this.summary=null!==(t=e.summary)&&void 0!==t?t:"",this.model={title:e.title,text:e.text},this.hide=e.hide,this.categoryId=e.categoryId}}};Object(r["__decorate"])([d["b"]],g.prototype,"categories",void 0),g=Object(r["__decorate"])([Object(o["b"])({components:{Button:n["a"],PageLayout:l["a"],Writer:c["a"],UInput:u["a"]}})],g);var b=g,y=b,f=(i("666b"),i("2877")),v=Object(f["a"])(y,a,s,!1,null,"2e1bea0e",null);e["default"]=v.exports},e8c8:function(t,e,i){}}]);