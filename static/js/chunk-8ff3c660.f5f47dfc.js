(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ff3c660"],{"0f34":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("PageLayout",{scopedSlots:e._u([{key:"header",fn:function(){return[r("layout-button",{attrs:{icon:["fab","telegram-plane"],name:e.$route.query.id?"更新":"发布"},nativeOn:{click:function(t){return e.handleSubmit(t)}}})]},proxy:!0}])},[r("el-form",{ref:"form",attrs:{model:e.model,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"项目名称",prop:"name",required:""}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),r("el-form-item",{attrs:{label:"文档地址",prop:"docUrl"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.docUrl,callback:function(t){e.$set(e.model,"docUrl",t)},expression:"model.docUrl"}})],1),r("el-form-item",{attrs:{label:"项目地址"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.projectUrl,callback:function(t){e.$set(e.model,"projectUrl",t)},expression:"model.projectUrl"}})],1),r("el-form-item",{attrs:{label:"预览地址"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.previewUrl,callback:function(t){e.$set(e.model,"previewUrl",t)},expression:"model.previewUrl"}})],1),r("el-form-item",{attrs:{label:"项目描述",prop:"description",required:""}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),r("el-form-item",{attrs:{label:"项目图标",prop:"avatar"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.avatar,callback:function(t){e.$set(e.model,"avatar",t)},expression:"model.avatar"}})],1),r("el-form-item",{attrs:{label:"预览图片",prop:"images"}},[e._l(e.model.images,(function(t){return r("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(t){return e.handleClose(e.tag)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New ")])],2),r("el-form-item",{attrs:{label:"正文",prop:"text",required:""}},[r("codemirror",{ref:"code",attrs:{options:e.cmOptions},model:{value:e.model.text,callback:function(t){e.$set(e.model,"text",t)},expression:"model.text"}})],1)],1)],1)},i=[],n=(r("c975"),r("e260"),r("a434"),r("e6cf"),r("ddb0"),r("9ab4")),a=r("2b0e"),s=r("2fe1"),l=r("45eb"),c=r("71ac"),u=r("8f94"),d=r("f381");let f=class extends a["default"]{constructor(){super(...arguments),this.model={name:"",previewUrl:"",docUrl:"",projectUrl:"",images:[],description:"",avatar:"",text:""},this.inputVisible=!1,this.inputValue="",this.rules={name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],description:[{required:!0,message:"请输入描述信息",trigger:"blur"}],text:[{required:!0,message:"请输入正文",trigger:"blur"}]},this.cmOptions=d["a"]}async created(){if(!this.id)return;const{data:e}=await this.$api("Project").get(this.$route.query.id);this.model=e}mounted(){setTimeout(()=>{var e;const t=null===(e=this.$refs.code)||void 0===e?void 0:e.codemirror;t.setSize(null,null),t.refresh()},2e3)}async handleSubmit(){var e=this;this.$refs["form"].validate((async function(t){t&&(e.id?(await e.$api("Project").update(e.id,e.model),e.$message.success("修改成功~")):(await e.$api("Project").post(e.model),e.$message.success("发送成功~")),e.$router.push({name:"project-list"}))}))}get id(){return this.$route.query.id}handleClose(e){this.model.images.splice(this.model.images.indexOf(e),1)}showInput(){this.inputVisible=!0,this.$nextTick(()=>{this.$refs.saveTagInput.$refs.input.focus()})}handleInputConfirm(){const e=this.inputValue;e&&(this.model.images?this.model.images.push(e):this.model.images=[e]),this.inputVisible=!1,this.inputValue=""}};f=Object(n["__decorate"])([Object(s["b"])({components:{PageLayout:l["a"],LayoutButton:c["a"],codemirror:u["codemirror"]}})],f);var p=f,m=p,b=(r("81fa"),r("fd0b"),r("2877")),h=Object(b["a"])(m,o,i,!1,null,"4e89b913",null);t["default"]=h.exports},"1dde":function(e,t,r){var o=r("d039"),i=r("b622"),n=r("2d00"),a=i("species");e.exports=function(e){return n>=51||!o((function(){var t=[],r=t.constructor={};return r[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"45eb":function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"root",staticClass:"layout"},[r("div",{staticClass:"toggle",class:{active:e.sidebar},on:{click:e.toggleSidebarStatus}},[r("icon",{attrs:{icon:["fas","sliders-h"]}})],1),r("header",{style:e.options.noPadding?"padding: 0.5rem 0;":""},[r("span",{staticClass:"title"},[e._v(e._s(e.options.title?e.options.title:e.$route.meta.title))]),e.$slots.header?r("div",{staticClass:"btn-container"},[e._t("header")],2):e._e()]),r("main",{on:{click:function(t){return e.setSidebarStatus(!1)}}},[e._t("default"),r("div",{staticClass:"end-center"},[e._t("end")],2)],2),r("footer",[r("div",{staticClass:"float-btns"},[e._t("footer")],2)])])},i=[],n=r("5530"),a=r("2f62"),s={computed:Object(n["a"])({},Object(a["c"])(["sidebar"])),methods:Object(n["a"])({},Object(a["b"])("app",["toggleSidebarStatus","setSidebarStatus"])),props:{options:{type:Object,default(){return{}}}},provide(){return{toTop:()=>{this.$refs.root.scrollTo({left:0,top:0,behavior:"smooth"})}}}},l=s,c=(r("f2df"),r("2877")),u=Object(c["a"])(l,o,i,!1,null,"3ab10d56",null);t["a"]=u.exports},"65f0":function(e,t,r){var o=r("861d"),i=r("e8b5"),n=r("b622"),a=n("species");e.exports=function(e,t){var r;return i(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?o(r)&&(r=r[a],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},"81fa":function(e,t,r){"use strict";var o=r("ed61"),i=r.n(o);i.a},8418:function(e,t,r){"use strict";var o=r("c04e"),i=r("9bf2"),n=r("5c6c");e.exports=function(e,t,r){var a=o(t);a in e?i.f(e,a,n(0,r)):e[a]=r}},a1e9:function(e,t,r){},a434:function(e,t,r){"use strict";var o=r("23e7"),i=r("23cb"),n=r("a691"),a=r("50c4"),s=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),d=r("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var r,o,u,d,f,p,g=s(this),x=a(g.length),y=i(e,x),O=arguments.length;if(0===O?r=o=0:1===O?(r=0,o=x-y):(r=O-2,o=b(m(n(t),0),x-y)),x+r-o>h)throw TypeError(v);for(u=l(g,o),d=0;d<o;d++)f=y+d,f in g&&c(u,d,g[f]);if(u.length=o,r<o){for(d=y;d<x-o;d++)f=d+o,p=d+r,f in g?g[p]=g[f]:delete g[p];for(d=x;d>x-o+r;d--)delete g[d-1]}else if(r>o)for(d=x-o;d>y;d--)f=d+o-1,p=d+r-1,f in g?g[p]=g[f]:delete g[p];for(d=0;d<r;d++)g[d+y]=arguments[d+2];return g.length=x-o+r,u}})},a640:function(e,t,r){"use strict";var o=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&o((function(){r.call(null,t||function(){throw 1},1)}))}},ae40:function(e,t,r){var o=r("83ab"),i=r("d039"),n=r("5135"),a=Object.defineProperty,s={},l=function(e){throw e};e.exports=function(e,t){if(n(s,e))return s[e];t||(t={});var r=[][e],c=!!n(t,"ACCESSORS")&&t.ACCESSORS,u=n(t,0)?t[0]:l,d=n(t,1)?t[1]:void 0;return s[e]=!!r&&!i((function(){if(c&&!o)return!0;var e={length:-1};c?a(e,1,{enumerable:!0,get:l}):e[1]=1,r.call(e,u,d)}))}},c975:function(e,t,r){"use strict";var o=r("23e7"),i=r("4d64").indexOf,n=r("a640"),a=r("ae40"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,c=n("indexOf"),u=a("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(e){return l?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},ceb0:function(e,t,r){},e8b5:function(e,t,r){var o=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==o(e)}},ed61:function(e,t,r){},f2df:function(e,t,r){"use strict";var o=r("a1e9"),i=r.n(o);i.a},fd0b:function(e,t,r){"use strict";var o=r("ceb0"),i=r.n(o);i.a}}]);