(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-412f24d0"],{"7aed":function(t,e,a){"use strict";var i=a("8a90"),s=a.n(i);s.a},"8a90":function(t,e,a){},d7b7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PageLayout",{attrs:{options:t.options},scopedSlots:t._u([{key:"header",fn:function(){return[a("Button",{attrs:{icon:["far","save"],backcolor:"#2ecc71",name:"保存"},nativeOn:{click:function(e){return t.handleSave(e)}}}),a("Button",{attrs:{icon:["fab","telegram-plane"],name:t.$route.query.id?"更新":"发布"},nativeOn:{click:function(e){return t.handleSubmit(e)}}})]},proxy:!0},{key:"footer",fn:function(){return[a("button",{on:{click:function(){return t.drawerOpen=!t.drawerOpen}}},[a("icon",{attrs:{icon:["fas","sliders-h"]}})],1)]},proxy:!0}])},[a("Writer",{attrs:{name:t.inputLabel,title:t.model.title,text:t.model.text},on:{change:t.onChange}},[a("div",{staticClass:"url"},[a("label",{staticClass:"prefix"},[t._v(t._s(t.baseUrl+"/"+t.category.slug+"/"))]),a("UInput",{attrs:{value:t.slug},on:{change:function(e){return t.slug=e}}})],1)]),a("el-drawer",{staticClass:"drawer",attrs:{title:"文章设定",direction:"rtl",visible:t.drawerOpen},on:{"update:visible":function(e){t.drawerOpen=e}}},[a("label",[t._v(" 分类 ")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}},t._l(t.categoryRecord,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t._id}})})),1),a("label",[t._v("概要")]),a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入概要(Option)"},model:{value:t.summary,callback:function(e){t.summary=e},expression:"summary"}}),a("span",[t._v("隐藏?")]),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.hide,callback:function(e){t.hide=e},expression:"hide"}})],1)],1)},s=[],r=(a("ddb0"),a("9ab4")),o=a("2fe1"),n=a("71ac"),c=a("45eb"),l=a("13cf"),u=a("8eab"),d=a("4bb5"),h=a("e464");let p=class extends h["a"]{constructor(){super(...arguments),this.options={title:""},this.inputLabel="想想取个什么题目比较好呢~",this.model={title:"",text:""},this.drawerOpen=!1,this.categoryId="",this.categoryRecord={},this.timer=null,this.slug="",this.summary="",this.hide=!1,this.prefix="mx-space-post"}async handleSubmit(){const t={...this.model,slug:this.slug,categoryId:this.category._id,summary:""===this.summary?void 0:this.summary,hide:this.hide};this.id?await this.$api("Post").update(this.id,t):await this.$api("Post").post(t),this.$notice.success("发布成功"),this.$router.push("/posts")}onChange(t){this.model={...t}}get baseUrl(){return"http://localhost:2323"}get category(){const t=this.categories.get(this.categoryId)||{slug:"",name:""};return{_id:this.categoryId,slug:t.slug,name:t.name}}setDefaultCategory(){const t=this.categories.first();return!!t&&(this.categoryId=t._id,this.categoryRecord=this.categories.toObject(),!0)}mounted(){this.timer=setInterval(()=>{const t=this.setDefaultCategory();t&&(clearInterval(this.timer),this.timer=null)},100)}beforeDestroy(){clearInterval(this.timer),this.timer=null}get id(){return this.$route.query.id}async created(){if(this.options.title=this.id?"修改文章":"撰写新文章",this.id){var t;const{data:e}=await this.$api("Post").get(this.$route.query.id);this.slug=e.slug,this.summary=null!==(t=e.summary)&&void 0!==t?t:"",this.model={title:e.title,text:e.text},this.hide=e.hide,this.categoryId=e.categoryId}}};Object(r["__decorate"])([d["b"]],p.prototype,"categories",void 0),p=Object(r["__decorate"])([Object(o["b"])({components:{Button:n["a"],PageLayout:c["a"],Writer:l["a"],UInput:u["a"]}})],p);var m=p,g=m,y=(a("7aed"),a("2877")),b=Object(y["a"])(g,i,s,!1,null,"566ab1f2",null);e["default"]=b.exports}}]);