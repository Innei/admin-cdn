(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f463010"],{"0f34":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("PageLayout",{scopedSlots:e._u([{key:"header",fn:function(){return[r("layout-button",{attrs:{icon:["fab","telegram-plane"],name:e.$route.query.id?"更新":"发布"},nativeOn:{click:function(t){return e.handleSubmit(t)}}})]},proxy:!0}])},[r("el-form",{ref:"form",attrs:{model:e.model,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"项目名称",prop:"name",required:""}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),r("el-form-item",{attrs:{label:"文档地址",prop:"docUrl"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.docUrl,callback:function(t){e.$set(e.model,"docUrl",t)},expression:"model.docUrl"}})],1),r("el-form-item",{attrs:{label:"项目地址"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.projectUrl,callback:function(t){e.$set(e.model,"projectUrl",t)},expression:"model.projectUrl"}})],1),r("el-form-item",{attrs:{label:"预览地址"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.previewUrl,callback:function(t){e.$set(e.model,"previewUrl",t)},expression:"model.previewUrl"}})],1),r("el-form-item",{attrs:{label:"项目描述",prop:"description",required:""}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),r("el-form-item",{attrs:{label:"正文",prop:"text",required:""}},[r("codemirror",{ref:"code",attrs:{options:e.cmOptions},model:{value:e.model.text,callback:function(t){e.$set(e.model,"text",t)},expression:"model.text"}})],1)],1)],1)},l=[],a=(r("ddb0"),r("9ab4")),i=r("2b0e"),s=r("2fe1"),n=r("45eb"),c=r("71ac"),d=r("8f94"),u=r("f3810"),m=r("d257");let p=class extends i["default"]{constructor(){super(...arguments),this.model={name:"",previewUrl:"",docUrl:"",projectUrl:"",images:[],description:"",avatar:"",text:""},this.rules={name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],description:[{required:!0,message:"请输入描述信息",trigger:"blur"}],text:[{required:!0,message:"请输入正文",trigger:"blur"}]},this.cmOptions=u["a"]}async created(){if(!this.id)return;const{data:e}=await this.$api("Project").get(this.$route.query.id);this.model=e}mounted(){setTimeout(()=>{var e;const t=null===(e=this.$refs.code)||void 0===e?void 0:e.codemirror;t.setSize(null,null),t.refresh()},2e3)}async handleSubmit(){this.$refs["form"].validate(async e=>{e&&(this.id?(await this.$api("Project").update(this.id,Object(m["b"])(this.model)),this.$message.success("修改成功~")):(await this.$api("Project").post(Object(m["b"])(this.model)),this.$message.success("发送成功~")),this.$router.push({name:"project-list"}))})}get id(){return this.$route.query.id}};p=Object(a["__decorate"])([Object(s["b"])({components:{PageLayout:n["a"],LayoutButton:c["a"],codemirror:d["codemirror"]}})],p);var f=p,b=f,h=(r("81fa"),r("2877")),v=Object(h["a"])(b,o,l,!1,null,null,null);t["default"]=v.exports},"81fa":function(e,t,r){"use strict";var o=r("ed61"),l=r.n(o);l.a},ed61:function(e,t,r){}}]);